#! /bin/bash
# Show a message of the day quotation

#==============================================
# Frase do dia (via fortune)
#==============================================
function do_motd() {
    local __fortune="$(which fortune 2> /dev/null)"
    [ -f ~/.plan ] && rm -f ~/.plan &>/dev/null
    [ -z __fortune ] && exit 0

    local LineLimit
    let LineLimit=3
    ${__fortune} -a > ~/.plan
    local LineReal=$(cat ~/.plan | sed -e 's/^[ \t]*//' | awk '{$1=$1}1' | wc -l)
    while [ $LineLimit -lt $LineReal ]
    do
      [ -f ~/.plan ] && rm -f ~/.plan &>/dev/null
      ${__fortune} -a > ~/.plan
      LineReal=$(cat ~/.plan | sed -e 's/^[ \t]*//' | awk '{$1=$1}1' | wc -l)
    done
    #cat ~/.plan | sed -e 's/^[ \t]*//' | awk '{$1=$1}1' | cowsay -f $(random_cow_file)
    cat ~/.plan | sed -e 's/^[ \t]*//' | awk '{$1=$1}1'
}

do_motd
